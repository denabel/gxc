% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/poly_link.R
\name{poly_link}
\alias{poly_link}
\title{Link Spatial Data with Copernicus Earth observation data}
\usage{
poly_link(
  indicator,
  data,
  date_var,
  time_span = 0,
  time_lag = 0,
  baseline = FALSE,
  min_year,
  max_year,
  order = "my",
  path = "./data/raw"
)
}
\arguments{
\item{indicator}{Character string specifying the indicator to download (e.g., "2m_temperature").}

\item{data}{An \code{sf} object containing the spatial data (polygons or points).}

\item{date_var}{Character string specifying the name of the date variable in \code{data}.}

\item{time_span}{Integer specifying the time span in months for averaging (default is \code{0}).}

\item{time_lag}{Integer specifying the time lag in months to adjust the date variable (default is \code{0}).}

\item{baseline}{Logical indicating whether to calculate a baseline (default is \code{FALSE}).}

\item{min_year}{Character string specifying the minimum year for the baseline period (required if \code{baseline = TRUE}).}

\item{max_year}{Character string specifying the maximum year for the baseline period (required if \code{baseline = TRUE}).}

\item{order}{Character string specifying the date format for parsing (default is \code{"my"}).}

\item{path}{Character string specifying the path where data will be stored (default is \code{"./data/raw"}).}
}
\value{
An \code{sf} object with the original spatial data and appended climate indicator values.
If \code{baseline = TRUE}, additional columns for the baseline values and deviations are included.
}
\description{
Downloads and processes Copernicus Earth observation data based on spatial and temporal parameters,
and extracts the relevant indicators for the provided spatial dataset.
}
\details{
This function interacts with the Copernicus Climate Data Store (CDS) API to download ERA5 climate data
for a specified indicator and time period. It processes the spatial data to create a bounding box,
constructs the necessary time sequences, and extracts the climate data corresponding to each spatial
observation. If a baseline is requested, it calculates the deviation from the baseline period.

\strong{Note:} Users must have an account with the CDS and have their API key configured for \code{ecmwfr}.
}
\examples{
\dontrun{
# Example usage:
library(sf)
library(dplyr)

# Load spatial data
my_data <- st_read("path/to/your/spatial_data.shp")

# Use the function to link climate data
result_dataset <- poly_link(
  indicator = "2m_temperature",
  data = my_data,
  date_var = "date_column",
  time_span = 0,
  time_lag = 0,
  baseline = FALSE,
  min_year = NULL,
  max_year = NULL,
  order = "ymd",
  path = "./data/raw"
)

# View the results
head(result_dataset)
}
}
